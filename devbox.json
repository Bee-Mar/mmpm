{
  "packages": [
    "python@3.10",
    "bun@1.0.25",
    "pm2@5.3.1",
    "pdm@2.12.3",
    "python310Packages.pip@23.2.1",
    "nodejs@20.11.0"
  ],
  "env": {
    "VENV_DIR": ".venv"
  },
  "shell": {
    "init_hook": [
      "[ -d $VENV_DIR ] && source $VENV_DIR/bin/activate"
    ],
    "scripts": {
      "setup": [
        "pdm install",
        "cd ui && bun install; cd ..",
        "source $VENV_DIR/bin/activate"
      ],
      "build": [
        "cd ui && npm install --legacy-peer-deps && cd ..",
        "cd ui && ./node_modules/@angular/cli/bin/ng.js build --configuration production --output-hashing none --base-href / && cd ..",
        "pdm install",
        "mkdir -p mmpm/ui",
        "cp -r ui/build/* mmpm/ui",
        "pdm build"
      ]
    }
  }
}
